# HelvetiCraft Backend – API Routen

Diese Dokumentation beschreibt **ausschliesslich die verfügbaren API-Routen** des HelvetiCraft-Backends.  
Sie dient als Übersicht für Entwickler, Frontend-Anbindungen sowie externe Dienste (z. B. Minecraft-Server, Discord-Bot).

---

## Auth

### POST `/auth/login`
Authentifiziert einen Benutzer über Benutzername und Passwort (AuthMe-kompatibel).  
Gibt bei Erfolg ein JWT zurück, welches für Web-Anfragen verwendet wird.

---

## Quiz

### GET `/quiz/question`
Gibt eine zufällige Quizfrage aus der Quiz-Datenbank zurück.

### POST `/quiz/ranking`
Erstellt oder aktualisiert den Rang eines Spielers im Quiz-Ranking.

---

## Phasen

### GET `/phases/current`
Liefert den aktuell aktiven Phasen-Zyklus inklusive Phase, Startzeiten, Dauer sowie Mindeststimmen.

### POST `/phases/advance` *(Admin only)*
Wechselt in die nächste Phase und triggert die automatische Auswertung der Initiativen.

### POST `/phases/start` *(Admin only)*
Startet sofort einen neuen Phasen-Zyklus und deaktiviert den vorherigen.

---

## News

### POST `/news`
Erstellt einen neuen News-Eintrag.  
Zusätzlich wird versucht, die News über den Discord-Bot zu veröffentlichen.

### GET `/news`
Gibt eine Liste aller News-Einträge zurück (optional mit Pagination).

### GET `/news/:id`
Gibt einen einzelnen News-Eintrag anhand der ID zurück.

### PUT `/news/:id`
Aktualisiert einen bestehenden News-Eintrag vollständig.

### DELETE `/news/:id`
Löscht einen News-Eintrag.  
Falls vorhanden, wird der zugehörige Discord-Post ebenfalls entfernt.

---

## Initiativen

### GET `/initiatives`  
### GET `/initiatives/all`
Gibt alle aktiven Initiativen inklusive aktueller Stimmenübersicht zurück.

### GET `/initiatives/:id`
Gibt eine einzelne Initiative inklusive Stimmen zurück.

### POST `/initiatives/create`
Erstellt eine neue Initiative (nur in Phase 0 möglich).

### PUT `/initiatives/edit/:id`
Bearbeitet Titel und Beschreibung einer Initiative  
(nur in Phase 0 und nur durch den Autor).

### DELETE `/initiatives/del/:id`
Löscht eine Initiative  
(nur in Phase 0 und nur durch den Autor).

### POST `/initiatives/vote/:id`
Gibt oder entfernt eine Stimme für eine Initiative (Normalvote, Phase 0).

### GET `/initiatives/:id/votes`
Gibt alle abgegebenen Normalvotes inklusive Benutzerinformationen zurück.

### GET `/initiatives/leaderboard`
Gibt eine nach Erstellungsdatum sortierte Übersicht aller Initiativen mit Stimmen zurück.

### POST `/initiatives/finalvote/:id`
Gibt eine finale Stimme für oder gegen eine Initiative ab.  
Admin-Voting in Phase 1, Spieler-Voting in Phase 2.

---

## Finanzen

### POST `/finances/transfer`
Überträgt Geld zwischen zwei Hauptkonten.

### GET `/finances/networth/:uuid`
Gibt das Nettovermögen eines Spielers zurück (Haupt- und Sparkonto).

### GET `/finances/:uuid/balance`
Gibt den aktuellen Kontostand eines Spielers zurück.

### GET `/finances/:uuid/exists`
Prüft, ob für den Spieler bereits ein Finanzkonto existiert.

### POST `/finances/:uuid`
Erstellt ein neues Finanzkonto für den Spieler.

---

## Discord-Logging

### POST `/discord-logging/upgrade-admin`
Sendet ein Admin-Upgrade-Event an den Discord-Bot.

### POST `/discord-logging/downgrade-admin`
Sendet ein Admin-Downgrade-Event an den Discord-Bot.

---

## Hinweis

Einige Routen erfordern eine Authentifizierung sowie bestimmte Berechtigungen  
(z. B. Admin-Rechte oder Autor der Initiative).  
Die genaue Zugriffskontrolle erfolgt serverseitig über Middleware.
